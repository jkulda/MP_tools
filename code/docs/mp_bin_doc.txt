
20220520_102000 copied as MP_BIN_DOC

******************************************************************************************
MD_BIN

converts MD trajectory data files (ASCII, single- or multiple-snapshot) in the DL_POLY format to the unique MD_TOOLS binary format.

Before opening the data file, MD_BIN (and all its equivalents for other input data formats) reads the associated .PAR file to obtain settings and crystallographic information (cf. examples). The file consists of a sequence of sections starting by a keyword usually corresponding to the name of one of MP_TOOLS. The sections may follow in an arbitrary order, while the order of the lines within them is fixed. Care should be paid to filling out the relevant parts. A good idea is to choose a short name of the .PAR file which will then be replicated as part of the binary output file names (typically followed by a string with the snapshot number). The SIMM_TYPE string in the GENERAL section is crucial to indicate the way of the input data handling (CELL, QUICK, BULK), the CELL being the default choice here.

As DL_POLY doesn't identify atoms in non-equivalent unit cell positions, the 	identification is done within MD_BIN by comparing their actual positions with the names and basis positions read from the .PAR file, where the typical records look like

		Ba Ba  .0  .0  .0  1  .8532			#chem. element, atom name, position, occupancy, b_coh
		Zr Zr -.5 -.5 -.5  1  .716
		O  O1 -.5 -.5  .0  1  .5805
		O  O2  .0 -.5 -.5  1  .5805
		O  O3 -.5  .0 -.5  1  .5805
		
with the first string being the AT_LABEL equivalent to the chemical symbol followed by the AT_NAME which adds an identifier (typically a digit) corresponding to the unit cell position. A complete list of all atoms in the unit cell is to be given (space-group P1), for the moment there is no possibility to generate symmetry-equivalent positions automatically.

A typical snapshot header in a DL_POLY trajectory

 timestep      750125      552960           1           3  3.99999990E-04   270.04999    
      194.2110000000        0.0000000000        0.0000000000          
        0.0000000000      194.2110000000        0.0000000000          
        0.0000000000        0.0000000000      194.2110000000          

with:
timestep	MD simulation type 
750125		number of steps  
552960		number of atoms (5 at/cell, no of cells 48^3 = 110592)
1					trajectory recording mode (1 = positions & velocities, 2 = positions, velocities & forces)count
3					boundary conditions (3 = parallelepiped)
4.0E-04		timestep between snapshots in ps (*)
270.05 		time at beginning (ps) 

After reading the .PAR input MD_BIN displays the corresponding information

		 Parameter file name (.par will be added)
		BZO200d
		 Input data path:  ./data/
		 Atom labels            3
							 1 Ba             1
							 1 Zr             2
							 4 O              3           4           5           6
		 BZO structure info (atoms):
							 1 Ba     0.00000000       0.00000000       0.00000000
							 2 Zr   -0.500000000     -0.500000000     -0.500000000
							 3 O1   -0.500000000     -0.500000000       0.00000000
							 4 O2     0.00000000     -0.500000000     -0.500000000
							 5 O3   -0.500000000       0.00000000     -0.500000000
							 6 Ox     0.00000000       0.00000000       0.00000000
							 
******************************************************************************************
HINT

for clean work it is preferable to define correctly the sign of the basis position vectors in the .PAR file, but it may not be an easy task to inspect the huge ASCII trajectory file, which in each snapshot contains first a million of lines related to the atoms sitting at the origin of the unit cell:
	the quick help is the UNIX/LINUX 'tail' command , which will display the last 10
	lines (or any other specified number) of the trajectory file with atoms in non trivial
	postions

******************************************************************************************

OUTPUT
The output uses a binary direct-access file structure with 1024 byte records (256 x 32-bit words).

The 1st record contains header information (dimension in the brackets, sim_type and file_title are 16-byte strings, all the rest 32-bit numbers and strings, integer or real) in the order

sim_type						simulation type, including the _bulk, _quick, _cell(default) specif.
file_title					name of the original ASCII data file
t_ms,t_step					MD microstep [ps], time tag of the snapshot dump[ps]
temp								temperature [K]
a_par(3),angle(3)		lattice parameter [Å], unit cell angles [º] 
n_row(3)						supercell dimensions [lattice units]
n_atom,n_eq					number of atoms in unit cell (including mixed occupancies)
j_force,j_shell			flags indicating presence of shell and force data
n_cond							supercell boundary conditions (3 = periodic)
n_rec,n_tot					number of records per position etc. array, total number of atoms
at_name(n_atom)			names of atoms (for each unit cell position) 
at_occup(n_atom)		relative occupancies
nsuper_r(n_atom)		total number of atoms of the given species 																

The rest of the file contains sequences of N_REC records containing the following arrays:
always present:
	at_ind(4,n_tot)		unit cell position indeces (1:3), atom species identification no. (4) 
	at_pos(4,n_tot)		atom position vectors (1:3), atom charge (4, facultative)
optional:
	at_vel(4,n_tot)		atom velocities [Å/ps] (1:3), atom mass(4)
  at_force(4,n_tot) atom forces (1:3) (only if velocities are present)

followed by the shell sequence of position, velocities and forces with the same option rules. The last record for each array is zero-padded in case of N_TOT not being commensurable with the record pattern.



